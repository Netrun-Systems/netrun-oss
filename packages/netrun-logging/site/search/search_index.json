{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"netrun-logging","text":"<p>Unified structured logging with correlation ID tracking and Azure App Insights integration.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>JSON Structured Logging: Machine-readable log output with ISO 8601 timestamps</li> <li>Correlation ID Tracking: Thread-safe request tracing across distributed systems</li> <li>FastAPI Integration: Middleware for automatic request/response logging</li> <li>Azure App Insights: Optional cloud logging with graceful fallback</li> <li>Zero Configuration: Sensible defaults that just work</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code>from netrun_logging import configure_logging, get_logger\n\n# Configure once at startup\nconfigure_logging(app_name=\"my-service\", environment=\"production\")\n\n# Get logger anywhere\nlogger = get_logger(__name__)\nlogger.info(\"Application started\", extra={\"version\": \"1.0.0\"})\n</code></pre>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install netrun-logging\n</code></pre>"},{"location":"#why-netrun-logging","title":"Why netrun-logging?","text":"Feature Standard logging netrun-logging JSON output Manual setup Built-in Correlation IDs Not included Thread-safe Azure integration Separate package Optional built-in FastAPI middleware DIY Included"},{"location":"#license","title":"License","text":"<p>MIT License - Copyright (c) 2025 Netrun Systems</p>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to netrun-logging are documented here.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#100-2025-11-24","title":"[1.0.0] - 2025-11-24","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Initial public release</li> <li>Core logging functionality with JSON formatting</li> <li>Thread-safe correlation ID tracking</li> <li>Request-scoped log context management</li> <li>FastAPI middleware for automatic request/response logging</li> <li>Azure App Insights integration with graceful fallback</li> <li>Comprehensive API documentation</li> <li>Examples for basic usage, FastAPI, and Azure integration</li> <li>Full test coverage (95%+ of codebase)</li> <li>Type hints for all public APIs</li> </ul>"},{"location":"changelog/#features","title":"Features","text":"<ul> <li><code>configure_logging()</code> - Configure logging at application startup</li> <li><code>get_logger()</code> - Get configured logger instances</li> <li><code>generate_correlation_id()</code> - Generate UUID4 correlation IDs</li> <li><code>get_correlation_id()</code> / <code>set_correlation_id()</code> - Correlation ID context management</li> <li><code>correlation_id_context()</code> - Context manager for scoped correlation ID tracking</li> <li><code>set_context()</code> / <code>get_context()</code> / <code>clear_context()</code> - Request-scoped logging context</li> <li><code>JsonFormatter</code> - Machine-readable JSON log formatting</li> <li><code>CorrelationIdMiddleware</code> - FastAPI middleware for correlation ID injection</li> <li><code>LoggingMiddleware</code> - FastAPI middleware for request/response logging</li> <li><code>add_logging_middleware()</code> - Helper to add both middlewares</li> </ul>"},{"location":"changelog/#performance","title":"Performance","text":"<ul> <li>Zero-copy log formatting</li> <li>Minimal overhead (&lt;1ms per log on modern hardware)</li> <li>Efficient context variable usage with contextvars</li> </ul>"},{"location":"changelog/#quality","title":"Quality","text":"<ul> <li>95%+ code coverage</li> <li>All functions type-hinted</li> <li>Comprehensive docstrings</li> <li>Multiple integration examples</li> </ul>"},{"location":"changelog/#upcoming-features","title":"Upcoming Features","text":""},{"location":"changelog/#110-planned","title":"[1.1.0] - Planned","text":"<ul> <li>Structured Logging Extensions</li> <li>Support for additional cloud providers (GCP Cloud Logging, AWS CloudWatch)</li> <li>Custom field transformers</li> <li> <p>Sensitive data redaction</p> </li> <li> <p>Performance Improvements</p> </li> <li>Batch log sending to cloud providers</li> <li>Configurable buffer sizes</li> <li> <p>Async handler support</p> </li> <li> <p>Developer Experience</p> </li> <li>CLI tool for local log inspection</li> <li>Log filtering utilities</li> <li>Integration with popular observability tools</li> </ul>"},{"location":"changelog/#200-future","title":"[2.0.0] - Future","text":"<ul> <li>Full async/await support throughout</li> <li>Pluggable formatter architecture</li> <li>Custom middleware builder</li> <li>Advanced sampling strategies</li> </ul>"},{"location":"changelog/#version-history","title":"Version History","text":""},{"location":"changelog/#versions-0x-development","title":"Versions 0.x (Development)","text":"<ul> <li>0.1.0 - Initial development version with core functionality</li> <li>0.2.0 - Added FastAPI middleware support</li> <li>0.3.0 - Added Azure App Insights integration</li> <li>0.4.0 - Added correlation ID tracking</li> <li>0.5.0 - Added log context management</li> <li>0.6.0 - Performance optimizations</li> <li>0.7.0 - Improved error handling</li> <li>0.8.0 - Added comprehensive testing</li> <li>0.9.0 - Documentation and examples</li> <li>0.9.5 - Final pre-release polish</li> </ul>"},{"location":"changelog/#migration-guide","title":"Migration Guide","text":""},{"location":"changelog/#from-standard-python-logging","title":"From Standard Python logging","text":"<p>Replace:</p> <pre><code>import logging\n\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n</code></pre> <p>With:</p> <pre><code>from netrun_logging import configure_logging, get_logger\n\nconfigure_logging(app_name=\"my-app\")\nlogger = get_logger(__name__)\n</code></pre>"},{"location":"changelog/#benefits","title":"Benefits","text":"<ul> <li>Automatic JSON formatting</li> <li>Built-in correlation ID tracking</li> <li>Azure integration without extra code</li> <li>FastAPI middleware included</li> </ul>"},{"location":"changelog/#support-reporting","title":"Support &amp; Reporting","text":"<p>For issues, feature requests, or questions: - GitHub Issues: https://github.com/netrun-services/netrun-logging/issues - Documentation: https://netrun-logging.readthedocs.io - Email: support@netrunsystems.com</p>"},{"location":"changelog/#license","title":"License","text":"<p>MIT License - See LICENSE file for details</p> <p>Copyright (c) 2025 Netrun Systems</p>"},{"location":"configuration/","title":"Configuration","text":""},{"location":"configuration/#configure_logging","title":"configure_logging()","text":"<p>The main configuration function accepts these parameters:</p> Parameter Type Default Description <code>app_name</code> str \"app\" Application name for log context <code>environment</code> str None Environment (falls back to <code>ENVIRONMENT</code> env var) <code>log_level</code> str \"INFO\" Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL) <code>enable_json</code> bool True Use JSON formatter <code>enable_correlation_id</code> bool True Enable correlation ID tracking <code>azure_insights_connection_string</code> str None Azure App Insights connection string"},{"location":"configuration/#environment-variables","title":"Environment Variables","text":"<p>netrun-logging respects these environment variables:</p> Variable Description <code>ENVIRONMENT</code> Default environment if not specified <code>APPLICATIONINSIGHTS_CONNECTION_STRING</code> Azure App Insights connection <code>LOG_LEVEL</code> Override log level"},{"location":"configuration/#example-configurations","title":"Example Configurations","text":""},{"location":"configuration/#development","title":"Development","text":"<pre><code>configure_logging(\n    app_name=\"my-service\",\n    environment=\"development\",\n    log_level=\"DEBUG\",\n)\n</code></pre>"},{"location":"configuration/#production","title":"Production","text":"<pre><code>configure_logging(\n    app_name=\"my-service\",\n    environment=\"production\",\n    log_level=\"INFO\",\n    azure_insights_connection_string=os.getenv(\"APPLICATIONINSIGHTS_CONNECTION_STRING\"),\n)\n</code></pre>"},{"location":"configuration/#minimal-defaults","title":"Minimal (Defaults)","text":"<pre><code>configure_logging()  # Uses all defaults\n</code></pre>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#installation","title":"Installation","text":"<p>Install from PyPI:</p> <pre><code>pip install netrun-logging\n</code></pre> <p>For Azure App Insights support:</p> <pre><code>pip install netrun-logging[azure]\n</code></pre>"},{"location":"getting-started/#basic-usage","title":"Basic Usage","text":""},{"location":"getting-started/#1-configure-logging","title":"1. Configure Logging","text":"<p>Call <code>configure_logging()</code> once at application startup:</p> <pre><code>from netrun_logging import configure_logging\n\nconfigure_logging(\n    app_name=\"my-service\",\n    environment=\"production\",\n    log_level=\"INFO\",\n)\n</code></pre>"},{"location":"getting-started/#2-get-a-logger","title":"2. Get a Logger","text":"<p>Use <code>get_logger()</code> to get a configured logger:</p> <pre><code>from netrun_logging import get_logger\n\nlogger = get_logger(__name__)\n</code></pre>"},{"location":"getting-started/#3-log-messages","title":"3. Log Messages","text":"<pre><code># Basic logging\nlogger.info(\"User logged in\")\n\n# With extra fields\nlogger.info(\"Order placed\", extra={\n    \"user_id\": 12345,\n    \"order_id\": \"ORD-001\",\n    \"total\": 99.99,\n})\n\n# Error with exception\ntry:\n    process_order()\nexcept Exception:\n    logger.exception(\"Order processing failed\")\n</code></pre>"},{"location":"getting-started/#4-output-format","title":"4. Output Format","text":"<p>All logs are JSON-formatted:</p> <pre><code>{\n  \"timestamp\": \"2025-11-24T22:30:00.123456+00:00\",\n  \"level\": \"INFO\",\n  \"message\": \"Order placed\",\n  \"logger\": \"my_module\",\n  \"extra\": {\n    \"user_id\": 12345,\n    \"order_id\": \"ORD-001\",\n    \"total\": 99.99\n  }\n}\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Options</li> <li>FastAPI Integration</li> <li>Azure App Insights</li> </ul>"},{"location":"api/","title":"API Reference","text":""},{"location":"api/#core-functions","title":"Core Functions","text":"Function Description <code>configure_logging()</code> Configure logging for application <code>get_logger()</code> Get a configured logger instance"},{"location":"api/#correlation-id","title":"Correlation ID","text":"Function Description <code>generate_correlation_id()</code> Generate new UUID correlation ID <code>get_correlation_id()</code> Get current correlation ID <code>set_correlation_id()</code> Set correlation ID in context <code>correlation_id_context()</code> Context manager for scoped IDs"},{"location":"api/#log-context","title":"Log Context","text":"Function Description <code>get_context()</code> Get current log context <code>set_context()</code> Set log context values <code>clear_context()</code> Clear all context values"},{"location":"api/#formatters","title":"Formatters","text":"Class Description <code>JsonFormatter</code> JSON log formatter"},{"location":"api/#middleware","title":"Middleware","text":"Class Description <code>CorrelationIdMiddleware</code> FastAPI correlation ID injection <code>LoggingMiddleware</code> FastAPI request/response logging <code>add_logging_middleware()</code> Helper to add both middlewares"},{"location":"api/configure_logging/","title":"configure_logging","text":"<p>Configure unified logging for your application.</p>"},{"location":"api/configure_logging/#signature","title":"Signature","text":"<pre><code>def configure_logging(\n    app_name: str = \"app\",\n    environment: Optional[str] = None,\n    log_level: str = \"INFO\",\n    enable_json: bool = True,\n    enable_correlation_id: bool = True,\n    azure_insights_connection_string: Optional[str] = None,\n) -&gt; None\n</code></pre>"},{"location":"api/configure_logging/#parameters","title":"Parameters","text":""},{"location":"api/configure_logging/#app_name","title":"app_name","text":"<ul> <li>Type: <code>str</code></li> <li>Default: <code>\"app\"</code></li> <li>Description: Application name included in log context</li> </ul>"},{"location":"api/configure_logging/#environment","title":"environment","text":"<ul> <li>Type: <code>Optional[str]</code></li> <li>Default: <code>None</code> (falls back to <code>ENVIRONMENT</code> env var, then <code>\"development\"</code>)</li> <li>Description: Environment name (development, staging, production)</li> </ul>"},{"location":"api/configure_logging/#log_level","title":"log_level","text":"<ul> <li>Type: <code>str</code></li> <li>Default: <code>\"INFO\"</code></li> <li>Description: Minimum log level. One of: DEBUG, INFO, WARNING, ERROR, CRITICAL</li> </ul>"},{"location":"api/configure_logging/#enable_json","title":"enable_json","text":"<ul> <li>Type: <code>bool</code></li> <li>Default: <code>True</code></li> <li>Description: Use JSON formatter for structured output</li> </ul>"},{"location":"api/configure_logging/#enable_correlation_id","title":"enable_correlation_id","text":"<ul> <li>Type: <code>bool</code></li> <li>Default: <code>True</code></li> <li>Description: Enable correlation ID tracking</li> </ul>"},{"location":"api/configure_logging/#azure_insights_connection_string","title":"azure_insights_connection_string","text":"<ul> <li>Type: <code>Optional[str]</code></li> <li>Default: <code>None</code></li> <li>Description: Azure Application Insights connection string</li> </ul>"},{"location":"api/configure_logging/#example","title":"Example","text":"<pre><code>from netrun_logging import configure_logging\nimport os\n\nconfigure_logging(\n    app_name=\"order-service\",\n    environment=\"production\",\n    log_level=\"INFO\",\n    azure_insights_connection_string=os.getenv(\"APPLICATIONINSIGHTS_CONNECTION_STRING\"),\n)\n</code></pre>"},{"location":"api/configure_logging/#notes","title":"Notes","text":"<ul> <li>Call once at application startup</li> <li>Subsequent calls will reconfigure logging</li> <li>Azure integration gracefully degrades if SDK not installed</li> </ul>"},{"location":"api/context/","title":"Log Context","text":"<p>Thread-safe log context management for adding request-scoped metadata to all logs.</p>"},{"location":"api/context/#get_context","title":"get_context","text":"<p>Get the current log context.</p> <pre><code>def get_context() -&gt; Dict[str, Any]\n</code></pre>"},{"location":"api/context/#returns","title":"Returns","text":"<p>Dictionary containing current context values</p>"},{"location":"api/context/#example","title":"Example","text":"<pre><code>from netrun_logging.context import get_context\n\ncontext = get_context()\nprint(context)  # {\"request_id\": \"123\", \"user_id\": \"456\"}\n</code></pre>"},{"location":"api/context/#set_context","title":"set_context","text":"<p>Set log context values (merges with existing context).</p> <pre><code>def set_context(**kwargs) -&gt; None\n</code></pre>"},{"location":"api/context/#parameters","title":"Parameters","text":"<ul> <li><code>**kwargs</code>: Key-value pairs to add to context</li> </ul>"},{"location":"api/context/#example_1","title":"Example","text":"<pre><code>from netrun_logging.context import set_context\nfrom netrun_logging import get_logger\n\nlogger = get_logger(__name__)\n\nset_context(user_id=12345, request_id=\"req-001\")\nlogger.info(\"User action\")\n# Log output includes: \"user_id\": 12345, \"request_id\": \"req-001\"\n</code></pre>"},{"location":"api/context/#clear_context","title":"clear_context","text":"<p>Clear all context values.</p> <pre><code>def clear_context() -&gt; None\n</code></pre>"},{"location":"api/context/#example_2","title":"Example","text":"<pre><code>from netrun_logging.context import clear_context, set_context\n\nset_context(user_id=123)\nclear_context()\n# Context is now empty\n</code></pre>"},{"location":"api/context/#request-scoped-context","title":"Request-Scoped Context","text":"<p>Use context for request-scoped metadata:</p> <pre><code>from fastapi import FastAPI, Request\nfrom netrun_logging import get_logger\nfrom netrun_logging.context import set_context, clear_context\n\napp = FastAPI()\nlogger = get_logger(__name__)\n\n@app.middleware(\"http\")\nasync def context_middleware(request: Request, call_next):\n    # Set context for this request\n    set_context(\n        request_id=request.headers.get(\"X-Request-ID\", \"unknown\"),\n        user_id=request.state.user_id,\n        endpoint=request.url.path,\n    )\n\n    try:\n        response = await call_next(request)\n        logger.info(\"Request completed\", extra={\"status_code\": response.status_code})\n        return response\n    finally:\n        clear_context()\n</code></pre>"},{"location":"api/context/#nested-context","title":"Nested Context","text":"<p>Context values are merged and automatically included in all logs:</p> <pre><code>from netrun_logging.context import set_context\nfrom netrun_logging import get_logger\n\nlogger = get_logger(__name__)\n\n# Set initial context\nset_context(request_id=\"req-001\")\n\n# Add more context\nset_context(user_id=123)\n\n# All logs now include both values\nlogger.info(\"Doing something\")\n# Output: {\"request_id\": \"req-001\", \"user_id\": 123}\n</code></pre>"},{"location":"api/context/#context-vs-extra","title":"Context vs Extra","text":"Feature Context Extra Parameter Scope Request/operation scoped Single log message Persistence Maintained across logs Single use Use Case User ID, request ID, session Operation details <pre><code>from netrun_logging.context import set_context\nfrom netrun_logging import get_logger\n\nlogger = get_logger(__name__)\n\n# Set context once\nset_context(user_id=123, request_id=\"req-001\")\n\n# Context automatically included\nlogger.info(\"Starting operation\")\n\n# Add operation-specific details\nlogger.info(\"Data processed\", extra={\"records\": 100, \"duration_ms\": 245})\n</code></pre>"},{"location":"api/correlation/","title":"Correlation ID","text":"<p>Thread-safe correlation ID management for distributed request tracing.</p>"},{"location":"api/correlation/#generate_correlation_id","title":"generate_correlation_id","text":"<p>Generate a new UUID4 correlation ID.</p> <pre><code>def generate_correlation_id() -&gt; str\n</code></pre>"},{"location":"api/correlation/#returns","title":"Returns","text":"<p>New UUID4 string (e.g., \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\")</p>"},{"location":"api/correlation/#example","title":"Example","text":"<pre><code>from netrun_logging.correlation import generate_correlation_id\n\ncid = generate_correlation_id()\nprint(cid)  # \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\"\n</code></pre>"},{"location":"api/correlation/#get_correlation_id","title":"get_correlation_id","text":"<p>Get the current correlation ID from context.</p> <pre><code>def get_correlation_id() -&gt; Optional[str]\n</code></pre>"},{"location":"api/correlation/#returns_1","title":"Returns","text":"<p>Current correlation ID string, or <code>None</code> if not set</p>"},{"location":"api/correlation/#example_1","title":"Example","text":"<pre><code>from netrun_logging.correlation import get_correlation_id\n\ncid = get_correlation_id()\nif cid:\n    print(f\"Current correlation ID: {cid}\")\n</code></pre>"},{"location":"api/correlation/#set_correlation_id","title":"set_correlation_id","text":"<p>Set the correlation ID in the current context.</p> <pre><code>def set_correlation_id(correlation_id: str) -&gt; None\n</code></pre>"},{"location":"api/correlation/#parameters","title":"Parameters","text":"<ul> <li><code>correlation_id</code>: Correlation ID to set</li> </ul>"},{"location":"api/correlation/#example_2","title":"Example","text":"<pre><code>from netrun_logging.correlation import set_correlation_id, get_correlation_id\n\nset_correlation_id(\"custom-id-123\")\nprint(get_correlation_id())  # \"custom-id-123\"\n</code></pre>"},{"location":"api/correlation/#correlation_id_context","title":"correlation_id_context","text":"<p>Context manager for scoped correlation ID tracking.</p> <pre><code>@contextmanager\ndef correlation_id_context(correlation_id: Optional[str] = None)\n</code></pre>"},{"location":"api/correlation/#parameters_1","title":"Parameters","text":"<ul> <li><code>correlation_id</code>: Optional ID to use (generates new one if not provided)</li> </ul>"},{"location":"api/correlation/#yields","title":"Yields","text":"<p>The correlation ID being used in this context</p>"},{"location":"api/correlation/#example_3","title":"Example","text":"<pre><code>from netrun_logging.correlation import correlation_id_context\nfrom netrun_logging import get_logger\n\nlogger = get_logger(__name__)\n\n# Auto-generate correlation ID\nwith correlation_id_context() as cid:\n    logger.info(\"Processing request\", extra={\"cid\": cid})\n    # All logs in this block share the same correlation ID\n\n# Use custom correlation ID\nwith correlation_id_context(\"request-123\") as cid:\n    logger.info(\"Processing\", extra={\"cid\": cid})\n</code></pre>"},{"location":"api/correlation/#distributed-tracing","title":"Distributed Tracing","text":"<p>Use correlation IDs to trace requests across multiple services:</p> <pre><code>from netrun_logging.correlation import get_correlation_id\nimport httpx\n\nasync def call_downstream_service():\n    cid = get_correlation_id()\n    headers = {\"X-Correlation-ID\": cid}\n\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\n            \"http://downstream-service/api/endpoint\",\n            headers=headers\n        )\n    return response\n</code></pre>"},{"location":"api/correlation/#thread-safety","title":"Thread Safety","text":"<p>Correlation IDs are stored using <code>contextvars</code> and are thread-safe:</p> <pre><code>import threading\nfrom netrun_logging.correlation import set_correlation_id, get_correlation_id\n\ndef worker():\n    set_correlation_id(\"thread-specific-id\")\n    print(get_correlation_id())  # \"thread-specific-id\"\n\nthread1 = threading.Thread(target=worker)\nthread1.start()\n\nset_correlation_id(\"main-thread-id\")\nprint(get_correlation_id())  # \"main-thread-id\"\n</code></pre>"},{"location":"api/get_logger/","title":"get_logger","text":"<p>Get a configured logger instance.</p>"},{"location":"api/get_logger/#signature","title":"Signature","text":"<pre><code>def get_logger(name: str) -&gt; logging.Logger\n</code></pre>"},{"location":"api/get_logger/#parameters","title":"Parameters","text":""},{"location":"api/get_logger/#name","title":"name","text":"<ul> <li>Type: <code>str</code></li> <li>Description: Logger name (typically <code>__name__</code> in your module)</li> </ul>"},{"location":"api/get_logger/#returns","title":"Returns","text":"<p>A Python <code>logging.Logger</code> instance configured with netrun-logging formatters and handlers.</p>"},{"location":"api/get_logger/#example","title":"Example","text":"<pre><code>from netrun_logging import get_logger\n\n# Get logger for current module\nlogger = get_logger(__name__)\n\n# Or with explicit name\nlogger = get_logger(\"my.module\")\n\n# Use logger normally\nlogger.info(\"Application started\")\nlogger.error(\"An error occurred\", exc_info=True)\n</code></pre>"},{"location":"api/get_logger/#best-practices","title":"Best Practices","text":""},{"location":"api/get_logger/#1-use-module-name","title":"1. Use Module Name","text":"<pre><code># Recommended\nlogger = get_logger(__name__)\n</code></pre>"},{"location":"api/get_logger/#2-add-extra-fields","title":"2. Add Extra Fields","text":"<pre><code>logger.info(\"User action\", extra={\n    \"user_id\": 12345,\n    \"action\": \"login\",\n    \"ip_address\": \"192.168.1.1\",\n})\n</code></pre>"},{"location":"api/get_logger/#3-handle-exceptions","title":"3. Handle Exceptions","text":"<pre><code>try:\n    risky_operation()\nexcept Exception:\n    logger.exception(\"Operation failed\")  # Includes traceback\n</code></pre>"},{"location":"api/get_logger/#4-structured-errors","title":"4. Structured Errors","text":"<pre><code>logger.error(\n    \"Payment processing failed\",\n    extra={\n        \"user_id\": user.id,\n        \"amount\": 99.99,\n        \"error_code\": \"INSUFFICIENT_FUNDS\",\n    }\n)\n</code></pre>"},{"location":"api/get_logger/#log-levels","title":"Log Levels","text":"Level Usage Severity DEBUG Detailed diagnostic information Low INFO General informational messages Low WARNING Warning messages (default minimum) Medium ERROR Error messages High CRITICAL Critical errors Highest"},{"location":"api/get_logger/#output-format","title":"Output Format","text":"<p>All log messages are formatted as JSON:</p> <pre><code>{\n  \"timestamp\": \"2025-11-24T22:30:00.123456+00:00\",\n  \"level\": \"INFO\",\n  \"message\": \"User action\",\n  \"logger\": \"my.module\",\n  \"correlation_id\": \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\",\n  \"extra\": {\n    \"user_id\": 12345,\n    \"action\": \"login\"\n  }\n}\n</code></pre>"},{"location":"api/json_formatter/","title":"JSON Formatter","text":"<p>Structured JSON log formatting for machine-readable output.</p>"},{"location":"api/json_formatter/#jsonformatter","title":"JsonFormatter","text":"<pre><code>class JsonFormatter(logging.Formatter)\n</code></pre> <p>Formats log records as JSON with ISO 8601 timestamps and optional correlation ID/context inclusion.</p>"},{"location":"api/json_formatter/#initialization","title":"Initialization","text":"<pre><code>JsonFormatter(\n    app_name: str = \"app\",\n    include_correlation_id: bool = True,\n    include_context: bool = True,\n)\n</code></pre>"},{"location":"api/json_formatter/#parameters","title":"Parameters","text":""},{"location":"api/json_formatter/#app_name","title":"app_name","text":"<ul> <li>Type: <code>str</code></li> <li>Default: <code>\"app\"</code></li> <li>Description: Application name included in all logs</li> </ul>"},{"location":"api/json_formatter/#include_correlation_id","title":"include_correlation_id","text":"<ul> <li>Type: <code>bool</code></li> <li>Default: <code>True</code></li> <li>Description: Include correlation ID in JSON output</li> </ul>"},{"location":"api/json_formatter/#include_context","title":"include_context","text":"<ul> <li>Type: <code>bool</code></li> <li>Default: <code>True</code></li> <li>Description: Include log context in JSON output</li> </ul>"},{"location":"api/json_formatter/#output-format","title":"Output Format","text":""},{"location":"api/json_formatter/#basic-log","title":"Basic Log","text":"<pre><code>{\n  \"timestamp\": \"2025-11-24T22:30:00.123456+00:00\",\n  \"level\": \"INFO\",\n  \"message\": \"Application started\",\n  \"logger\": \"my_module\",\n  \"app_name\": \"my-service\"\n}\n</code></pre>"},{"location":"api/json_formatter/#with-correlation-id","title":"With Correlation ID","text":"<pre><code>{\n  \"timestamp\": \"2025-11-24T22:30:00.123456+00:00\",\n  \"level\": \"INFO\",\n  \"message\": \"Processing request\",\n  \"logger\": \"my_module\",\n  \"app_name\": \"my-service\",\n  \"correlation_id\": \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\"\n}\n</code></pre>"},{"location":"api/json_formatter/#with-extra-fields","title":"With Extra Fields","text":"<pre><code>{\n  \"timestamp\": \"2025-11-24T22:30:00.123456+00:00\",\n  \"level\": \"INFO\",\n  \"message\": \"Order placed\",\n  \"logger\": \"order_service\",\n  \"app_name\": \"my-service\",\n  \"correlation_id\": \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\",\n  \"extra\": {\n    \"user_id\": 12345,\n    \"order_id\": \"ORD-001\",\n    \"total\": 99.99\n  }\n}\n</code></pre>"},{"location":"api/json_formatter/#with-exception","title":"With Exception","text":"<pre><code>{\n  \"timestamp\": \"2025-11-24T22:30:00.123456+00:00\",\n  \"level\": \"ERROR\",\n  \"message\": \"Order processing failed\",\n  \"logger\": \"order_service\",\n  \"app_name\": \"my-service\",\n  \"correlation_id\": \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\",\n  \"exception\": {\n    \"type\": \"ValueError\",\n    \"message\": \"Invalid order amount\",\n    \"traceback\": \"Traceback (most recent call last):\\n  ...\"\n  }\n}\n</code></pre>"},{"location":"api/json_formatter/#usage","title":"Usage","text":""},{"location":"api/json_formatter/#automatic-configuration","title":"Automatic Configuration","text":"<p><code>JsonFormatter</code> is automatically configured when you call <code>configure_logging()</code>:</p> <pre><code>from netrun_logging import configure_logging\n\nconfigure_logging(\n    app_name=\"my-service\",\n    enable_json=True,  # Uses JsonFormatter by default\n)\n</code></pre>"},{"location":"api/json_formatter/#manual-configuration","title":"Manual Configuration","text":"<pre><code>import logging\nfrom netrun_logging.formatting import JsonFormatter\n\n# Create handler\nhandler = logging.StreamHandler()\n\n# Create and attach formatter\nformatter = JsonFormatter(app_name=\"my-service\")\nhandler.setFormatter(formatter)\n\n# Attach to logger\nlogger = logging.getLogger(\"my_module\")\nlogger.addHandler(handler)\n</code></pre>"},{"location":"api/json_formatter/#timestamp-format","title":"Timestamp Format","text":"<p>All timestamps are ISO 8601 formatted with timezone information:</p> <pre><code>2025-11-24T22:30:00.123456+00:00\n</code></pre> <p>Format: <code>YYYY-MM-DDTHH:MM:SS.mmmmmm+TZ:TZ</code></p>"},{"location":"api/json_formatter/#field-names","title":"Field Names","text":"<p>Standard JSON fields are always included:</p> Field Type Description <code>timestamp</code> string ISO 8601 formatted timestamp <code>level</code> string Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL) <code>message</code> string Log message <code>logger</code> string Logger name <code>app_name</code> string Application name <code>correlation_id</code> string Optional correlation ID (if enabled) <code>extra</code> object Optional extra fields <code>exception</code> object Optional exception details (if logging exception)"},{"location":"api/json_formatter/#custom-formatter-extension","title":"Custom Formatter Extension","text":"<p>Extend <code>JsonFormatter</code> for custom behavior:</p> <pre><code>from netrun_logging.formatting import JsonFormatter\nimport json\n\nclass CustomJsonFormatter(JsonFormatter):\n    def format(self, record):\n        # Call parent to get base JSON dict\n        log_dict = json.loads(super().format(record))\n\n        # Add custom field\n        log_dict[\"custom_field\"] = \"custom_value\"\n\n        return json.dumps(log_dict)\n</code></pre>"},{"location":"api/middleware/","title":"FastAPI Middleware","text":"<p>Middleware components for FastAPI integration.</p>"},{"location":"api/middleware/#correlationidmiddleware","title":"CorrelationIdMiddleware","text":"<p>Injects correlation ID into each request.</p> <pre><code>class CorrelationIdMiddleware(BaseHTTPMiddleware)\n</code></pre>"},{"location":"api/middleware/#behavior","title":"Behavior","text":"<ol> <li>Reads <code>X-Correlation-ID</code> header if present</li> <li>Generates new UUID if not provided</li> <li>Stores in <code>request.state.correlation_id</code></li> <li>Adds <code>X-Correlation-ID</code> to response headers</li> </ol>"},{"location":"api/middleware/#example","title":"Example","text":"<pre><code>from fastapi import FastAPI\nfrom netrun_logging.middleware import CorrelationIdMiddleware\n\napp = FastAPI()\napp.add_middleware(CorrelationIdMiddleware)\n\n@app.get(\"/api/endpoint\")\nasync def my_endpoint():\n    return {\"status\": \"ok\"}\n</code></pre>"},{"location":"api/middleware/#response-header","title":"Response Header","text":"<p>All responses include correlation ID:</p> <pre><code>X-Correlation-ID: a1b2c3d4-e5f6-7890-abcd-ef1234567890\n</code></pre>"},{"location":"api/middleware/#client-integration","title":"Client Integration","text":"<p>Use correlation ID in client requests:</p> <pre><code>import httpx\n\nasync def call_downstream():\n    # Get correlation ID from response\n    response = await httpx.get(\n        \"http://upstream-service/api/endpoint\"\n    )\n\n    correlation_id = response.headers.get(\"X-Correlation-ID\")\n\n    # Pass it to downstream services\n    headers = {\"X-Correlation-ID\": correlation_id}\n    downstream_response = await httpx.get(\n        \"http://downstream-service/api/endpoint\",\n        headers=headers\n    )\n    return downstream_response\n</code></pre>"},{"location":"api/middleware/#loggingmiddleware","title":"LoggingMiddleware","text":"<p>Logs request and response details.</p> <pre><code>class LoggingMiddleware(BaseHTTPMiddleware)\n</code></pre>"},{"location":"api/middleware/#logged-information","title":"Logged Information","text":"<p>Request: - HTTP method (GET, POST, etc.) - URL path - Query parameters - Client host/IP - Correlation ID</p> <p>Response: - HTTP status code - Response duration (milliseconds) - Correlation ID</p>"},{"location":"api/middleware/#example_1","title":"Example","text":"<pre><code>from fastapi import FastAPI\nfrom netrun_logging.middleware import LoggingMiddleware\n\napp = FastAPI()\napp.add_middleware(LoggingMiddleware, log_level=\"INFO\")\n\n@app.get(\"/api/users/{user_id}\")\nasync def get_user(user_id: int):\n    return {\"user_id\": user_id, \"name\": \"John Doe\"}\n</code></pre>"},{"location":"api/middleware/#sample-output","title":"Sample Output","text":"<pre><code>{\n  \"timestamp\": \"2025-11-24T22:30:00.123456+00:00\",\n  \"level\": \"INFO\",\n  \"message\": \"HTTP Request\",\n  \"logger\": \"netrun_logging.middleware\",\n  \"correlation_id\": \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\",\n  \"extra\": {\n    \"method\": \"GET\",\n    \"path\": \"/api/users/123\",\n    \"query_params\": {},\n    \"client_host\": \"192.168.1.1\"\n  }\n}\n</code></pre> <p>Response log:</p> <pre><code>{\n  \"timestamp\": \"2025-11-24T22:30:00.234567+00:00\",\n  \"level\": \"INFO\",\n  \"message\": \"HTTP Response\",\n  \"logger\": \"netrun_logging.middleware\",\n  \"correlation_id\": \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\",\n  \"extra\": {\n    \"status_code\": 200,\n    \"duration_ms\": 45\n  }\n}\n</code></pre>"},{"location":"api/middleware/#log-level-configuration","title":"Log Level Configuration","text":"<pre><code>from fastapi import FastAPI\nfrom netrun_logging.middleware import LoggingMiddleware\n\napp = FastAPI()\n\n# Only log warnings and above\napp.add_middleware(LoggingMiddleware, log_level=\"WARNING\")\n\n# Log all requests (default is INFO)\napp.add_middleware(LoggingMiddleware, log_level=\"DEBUG\")\n</code></pre>"},{"location":"api/middleware/#add_logging_middleware","title":"add_logging_middleware","text":"<p>Helper function to add both middlewares in correct order.</p> <pre><code>def add_logging_middleware(app: FastAPI, log_level: str = \"INFO\") -&gt; None\n</code></pre>"},{"location":"api/middleware/#parameters","title":"Parameters","text":"<ul> <li><code>app</code>: FastAPI application instance</li> <li><code>log_level</code>: Logging level for requests/responses (default \"INFO\")</li> </ul>"},{"location":"api/middleware/#example_2","title":"Example","text":"<pre><code>from fastapi import FastAPI\nfrom netrun_logging import configure_logging\nfrom netrun_logging.middleware import add_logging_middleware\n\n# Configure logging\nconfigure_logging(app_name=\"my-service\")\n\n# Create app\napp = FastAPI()\n\n# Add both middlewares in correct order\nadd_logging_middleware(app, log_level=\"INFO\")\n\n@app.get(\"/health\")\nasync def health_check():\n    return {\"status\": \"healthy\"}\n</code></pre>"},{"location":"api/middleware/#middleware-order","title":"Middleware Order","text":"<p>When using both middlewares, the correct order is important:</p> <pre><code># Correct order: Correlation ID first, then Logging\napp.add_middleware(LoggingMiddleware)\napp.add_middleware(CorrelationIdMiddleware)\n\n# OR use the helper\nadd_logging_middleware(app)  # Handles order automatically\n</code></pre> <p>The logging middleware needs access to the correlation ID set by the correlation ID middleware, so correlation ID middleware should be added last (they execute first in reverse order).</p>"},{"location":"api/middleware/#error-handling","title":"Error Handling","text":"<p>Errors in endpoints are automatically logged with full traceback:</p> <pre><code>from fastapi import FastAPI\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.middleware import add_logging_middleware\n\nconfigure_logging(app_name=\"my-service\")\napp = FastAPI()\nadd_logging_middleware(app)\n\nlogger = get_logger(__name__)\n\n@app.get(\"/api/risky\")\nasync def risky_endpoint():\n    try:\n        result = 1 / 0  # Oops!\n    except Exception:\n        logger.exception(\"Endpoint failed\")\n        raise\n</code></pre> <p>Output:</p> <pre><code>{\n  \"timestamp\": \"2025-11-24T22:30:00.123456+00:00\",\n  \"level\": \"ERROR\",\n  \"message\": \"Endpoint failed\",\n  \"logger\": \"__main__\",\n  \"correlation_id\": \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\",\n  \"exception\": {\n    \"type\": \"ZeroDivisionError\",\n    \"message\": \"division by zero\",\n    \"traceback\": \"Traceback (most recent call last):\\n  File ...\"\n  }\n}\n</code></pre>"},{"location":"examples/azure/","title":"Azure App Insights Integration","text":""},{"location":"examples/azure/#installation","title":"Installation","text":"<p>Install with Azure support:</p> <pre><code>pip install netrun-logging[azure]\n</code></pre>"},{"location":"examples/azure/#basic-configuration","title":"Basic Configuration","text":"<pre><code>from netrun_logging import configure_logging\nimport os\n\n# Configure with Azure App Insights\nconfigure_logging(\n    app_name=\"my-service\",\n    environment=\"production\",\n    log_level=\"INFO\",\n    azure_insights_connection_string=os.getenv(\"APPLICATIONINSIGHTS_CONNECTION_STRING\"),\n)\n</code></pre>"},{"location":"examples/azure/#environment-setup","title":"Environment Setup","text":""},{"location":"examples/azure/#azure-portal","title":"Azure Portal","text":"<ol> <li>Create Application Insights resource</li> <li>Copy connection string</li> <li>Set as environment variable:</li> </ol> <pre><code>export APPLICATIONINSIGHTS_CONNECTION_STRING=\"InstrumentationKey=xxx;IngestionEndpoint=https://xxx.in.applicationinsights.azure.com/;LiveEndpoint=https://xxx.live.applicationinsights.azure.com/\"\n</code></pre>"},{"location":"examples/azure/#docker","title":"Docker","text":"<pre><code>FROM python:3.11-slim\n\nWORKDIR /app\n\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\n\nCOPY . .\n\nENV APPLICATIONINSIGHTS_CONNECTION_STRING=\"InstrumentationKey=xxx;...\"\nENV ENVIRONMENT=\"production\"\nENV LOG_LEVEL=\"INFO\"\n\nCMD [\"python\", \"main.py\"]\n</code></pre>"},{"location":"examples/azure/#kubernetes","title":"Kubernetes","text":"<pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: app-insights-config\ndata:\n  connection_string: \"InstrumentationKey=xxx;...\"\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-service\nspec:\n  template:\n    spec:\n      containers:\n      - name: my-service\n        image: my-service:1.0.0\n        env:\n        - name: APPLICATIONINSIGHTS_CONNECTION_STRING\n          valueFrom:\n            configMapKeyRef:\n              name: app-insights-config\n              key: connection_string\n        - name: ENVIRONMENT\n          value: \"production\"\n</code></pre>"},{"location":"examples/azure/#fastapi-with-azure","title":"FastAPI with Azure","text":"<pre><code>from fastapi import FastAPI\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.middleware import add_logging_middleware\nimport os\n\n# Configure at startup\nconfigure_logging(\n    app_name=\"fastapi-service\",\n    environment=os.getenv(\"ENVIRONMENT\", \"development\"),\n    log_level=\"INFO\",\n    azure_insights_connection_string=os.getenv(\"APPLICATIONINSIGHTS_CONNECTION_STRING\"),\n)\n\n# Create app\napp = FastAPI(title=\"FastAPI Service\")\n\n# Add logging middleware\nadd_logging_middleware(app)\n\n# Get logger\nlogger = get_logger(__name__)\n\n@app.get(\"/api/endpoint\")\nasync def my_endpoint():\n    logger.info(\"Endpoint called\")\n    return {\"message\": \"Hello from Azure\"}\n\n@app.on_event(\"startup\")\nasync def startup():\n    logger.info(\"Application starting\", extra={\"version\": \"1.0.0\"})\n\n@app.on_event(\"shutdown\")\nasync def shutdown():\n    logger.info(\"Application shutting down\")\n</code></pre>"},{"location":"examples/azure/#multi-environment-setup","title":"Multi-Environment Setup","text":"<pre><code>from netrun_logging import configure_logging\nimport os\n\ndef setup_logging():\n    environment = os.getenv(\"ENVIRONMENT\", \"development\")\n\n    if environment == \"production\":\n        # Production: Azure + JSON + correlation IDs\n        configure_logging(\n            app_name=\"my-service\",\n            environment=\"production\",\n            log_level=\"INFO\",\n            enable_json=True,\n            enable_correlation_id=True,\n            azure_insights_connection_string=os.getenv(\"APPLICATIONINSIGHTS_CONNECTION_STRING\"),\n        )\n    elif environment == \"staging\":\n        # Staging: Azure + verbose logging\n        configure_logging(\n            app_name=\"my-service\",\n            environment=\"staging\",\n            log_level=\"DEBUG\",\n            enable_json=True,\n            enable_correlation_id=True,\n            azure_insights_connection_string=os.getenv(\"APPLICATIONINSIGHTS_CONNECTION_STRING\"),\n        )\n    else:\n        # Development: local JSON + debug info\n        configure_logging(\n            app_name=\"my-service\",\n            environment=\"development\",\n            log_level=\"DEBUG\",\n            enable_json=True,\n            enable_correlation_id=True,\n        )\n</code></pre>"},{"location":"examples/azure/#azure-monitoring-queries","title":"Azure Monitoring Queries","text":"<p>After logs are sent to Azure, query them with KQL (Kusto Query Language):</p>"},{"location":"examples/azure/#all-logs-for-service","title":"All Logs for Service","text":"<pre><code>traces\n| where customDimensions.app_name == \"my-service\"\n| order by timestamp desc\n| limit 100\n</code></pre>"},{"location":"examples/azure/#error-logs","title":"Error Logs","text":"<pre><code>traces\n| where customDimensions.app_name == \"my-service\"\n| where severityLevel &gt;= 2  // ERROR level\n| order by timestamp desc\n</code></pre>"},{"location":"examples/azure/#by-correlation-id","title":"By Correlation ID","text":"<pre><code>traces\n| where customDimensions.correlation_id == \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\"\n| order by timestamp asc\n</code></pre>"},{"location":"examples/azure/#performance-analysis","title":"Performance Analysis","text":"<pre><code>traces\n| where customDimensions.app_name == \"my-service\"\n| where customDimensions.duration_ms &gt; 1000\n| summarize count(), avg(todouble(customDimensions.duration_ms)) by customDimensions.operation\n</code></pre>"},{"location":"examples/azure/#error-rate-by-endpoint","title":"Error Rate by Endpoint","text":"<pre><code>traces\n| where customDimensions.app_name == \"my-service\"\n| summarize\n    total=count(),\n    errors=sumif(1, severityLevel &gt;= 2)\n    by customDimensions.endpoint\n| extend error_rate = errors * 100.0 / total\n| order by error_rate desc\n</code></pre>"},{"location":"examples/azure/#alerting","title":"Alerting","text":""},{"location":"examples/azure/#alert-on-high-error-rate","title":"Alert on High Error Rate","text":"<ol> <li>Go to Application Insights resource</li> <li>Create Alert Rule</li> <li>Condition:</li> <li>Custom log search</li> <li>Query: <code>traces | where customDimensions.app_name == \"my-service\" and severityLevel &gt;= 2 | summarize count()</code></li> <li>Threshold: &gt; 10 errors in 5 minutes</li> </ol>"},{"location":"examples/azure/#alert-on-slow-requests","title":"Alert on Slow Requests","text":"<pre><code>traces\n| where customDimensions.app_name == \"my-service\"\n| where todouble(customDimensions.duration_ms) &gt; 5000\n| summarize count()\n</code></pre>"},{"location":"examples/azure/#integration-with-other-services","title":"Integration with Other Services","text":""},{"location":"examples/azure/#sending-to-azure-from-background-jobs","title":"Sending to Azure from Background Jobs","text":"<pre><code>import asyncio\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.correlation import correlation_id_context\nimport os\n\nconfigure_logging(\n    app_name=\"background-jobs\",\n    environment=os.getenv(\"ENVIRONMENT\", \"production\"),\n    azure_insights_connection_string=os.getenv(\"APPLICATIONINSIGHTS_CONNECTION_STRING\"),\n)\n\nlogger = get_logger(__name__)\n\nasync def process_job(job_id: str):\n    with correlation_id_context(job_id) as cid:\n        logger.info(\"Job started\", extra={\"job_id\": job_id})\n\n        try:\n            # Do work\n            await asyncio.sleep(1)\n            logger.info(\"Job completed\", extra={\"job_id\": job_id})\n        except Exception:\n            logger.exception(\"Job failed\")\n\n# Run job\nasyncio.run(process_job(\"job-123\"))\n</code></pre>"},{"location":"examples/azure/#graceful-degradation","title":"Graceful Degradation","text":"<p>If Azure connection fails, logging continues to console:</p> <pre><code>from netrun_logging import configure_logging\n\n# If Azure is unavailable, falls back to local logging\nconfigure_logging(\n    app_name=\"resilient-service\",\n    azure_insights_connection_string=\"invalid-or-missing-string\",  # Will fall back gracefully\n)\n\n# Logging continues to work - just goes to console instead of Azure\nlogger = get_logger(__name__)\nlogger.info(\"This logs successfully even if Azure is unavailable\")\n</code></pre>"},{"location":"examples/azure/#troubleshooting","title":"Troubleshooting","text":""},{"location":"examples/azure/#connection-string-not-found","title":"Connection String Not Found","text":"<pre><code>import os\nfrom netrun_logging import configure_logging\n\nconnection_string = os.getenv(\"APPLICATIONINSIGHTS_CONNECTION_STRING\")\nif not connection_string:\n    print(\"WARNING: Azure connection string not set. Logs will not go to Application Insights.\")\n\nconfigure_logging(\n    app_name=\"my-service\",\n    azure_insights_connection_string=connection_string,\n)\n</code></pre>"},{"location":"examples/azure/#verify-logs-are-arriving","title":"Verify Logs Are Arriving","text":"<p>In Azure Portal:</p> <ol> <li>Open Application Insights resource</li> <li>Go to Logs</li> <li>Run: <code>traces | where customDimensions.app_name == \"my-service\" | top 10 by timestamp</code></li> <li>Should see recent logs</li> </ol>"},{"location":"examples/azure/#check-environment-variables","title":"Check Environment Variables","text":"<pre><code># Linux/Mac\necho $APPLICATIONINSIGHTS_CONNECTION_STRING\n\n# Windows PowerShell\n$env:APPLICATIONINSIGHTS_CONNECTION_STRING\n\n# Windows Command Prompt\necho %APPLICATIONINSIGHTS_CONNECTION_STRING%\n</code></pre>"},{"location":"examples/basic/","title":"Basic Usage Examples","text":""},{"location":"examples/basic/#minimal-setup","title":"Minimal Setup","text":"<p>The simplest possible setup:</p> <pre><code>from netrun_logging import configure_logging, get_logger\n\n# One-time setup\nconfigure_logging(app_name=\"my-app\")\n\n# Get logger\nlogger = get_logger(__name__)\n\n# Use it\nlogger.info(\"Hello, world!\")\n</code></pre>"},{"location":"examples/basic/#logging-levels","title":"Logging Levels","text":"<pre><code>from netrun_logging import configure_logging, get_logger\n\nconfigure_logging(app_name=\"my-app\", log_level=\"DEBUG\")\nlogger = get_logger(__name__)\n\n# Different log levels\nlogger.debug(\"Detailed diagnostic information\")\nlogger.info(\"General information\")\nlogger.warning(\"Something unexpected happened\")\nlogger.error(\"A serious error occurred\")\nlogger.critical(\"System is in critical state\")\n</code></pre>"},{"location":"examples/basic/#adding-structured-data","title":"Adding Structured Data","text":"<p>Include extra fields for better searchability:</p> <pre><code>from netrun_logging import get_logger\n\nlogger = get_logger(\"order_service\")\n\n# Simple message\nlogger.info(\"Order created\")\n\n# With structured data\nlogger.info(\"Order created\", extra={\n    \"order_id\": \"ORD-12345\",\n    \"user_id\": 789,\n    \"amount\": 99.99,\n    \"currency\": \"USD\",\n})\n\n# Nested data\nlogger.info(\"Payment processed\", extra={\n    \"transaction\": {\n        \"id\": \"TXN-001\",\n        \"amount\": 99.99,\n        \"status\": \"completed\",\n    },\n    \"user_id\": 789,\n})\n</code></pre>"},{"location":"examples/basic/#exception-logging","title":"Exception Logging","text":"<pre><code>from netrun_logging import get_logger\n\nlogger = get_logger(__name__)\n\n# Log with exception context\ntry:\n    result = int(\"not a number\")\nexcept ValueError:\n    logger.exception(\"Failed to parse value\")  # Includes traceback\n</code></pre>"},{"location":"examples/basic/#contextual-logging","title":"Contextual Logging","text":"<pre><code>from netrun_logging import get_logger\nfrom netrun_logging.context import set_context, clear_context\n\nlogger = get_logger(__name__)\n\n# Set context for a request\nset_context(\n    request_id=\"REQ-123\",\n    user_id=456,\n    session_id=\"SESS-789\",\n)\n\n# All logs automatically include context\nlogger.info(\"Processing request\")  # Includes request_id, user_id, session_id\nlogger.info(\"Validating user\")      # Includes same context\n\n# Clear context when done\nclear_context()\n</code></pre>"},{"location":"examples/basic/#distributed-tracing","title":"Distributed Tracing","text":"<pre><code>from netrun_logging import get_logger\nfrom netrun_logging.correlation import correlation_id_context\n\nlogger = get_logger(__name__)\n\n# Start request with correlation ID\nwith correlation_id_context() as correlation_id:\n    logger.info(\"Request started\", extra={\"cid\": correlation_id})\n\n    # Simulate calling downstream service\n    logger.info(\"Calling downstream API\")\n\n    # Correlation ID is available throughout\n    logger.info(\"Request completed\")\n</code></pre>"},{"location":"examples/basic/#multiple-loggers","title":"Multiple Loggers","text":"<pre><code>from netrun_logging import get_logger\n\n# Create loggers for different modules\nauth_logger = get_logger(\"auth_service\")\npayment_logger = get_logger(\"payment_service\")\ndb_logger = get_logger(\"database\")\n\n# Use independently\nauth_logger.info(\"User authenticated\", extra={\"user_id\": 123})\npayment_logger.info(\"Payment initiated\", extra={\"amount\": 99.99})\ndb_logger.debug(\"Query executed\", extra={\"table\": \"users\", \"rows\": 42})\n</code></pre>"},{"location":"examples/basic/#performance-monitoring","title":"Performance Monitoring","text":"<pre><code>import time\nfrom netrun_logging import get_logger\n\nlogger = get_logger(__name__)\n\ndef slow_operation():\n    start = time.time()\n    # ... do work ...\n    duration = (time.time() - start) * 1000\n\n    logger.info(\n        \"Operation completed\",\n        extra={\n            \"duration_ms\": duration,\n            \"operation\": \"slow_operation\",\n        }\n    )\n\nslow_operation()\n</code></pre>"},{"location":"examples/basic/#environment-specific-configuration","title":"Environment-Specific Configuration","text":"<pre><code>from netrun_logging import configure_logging\nimport os\n\nenvironment = os.getenv(\"ENVIRONMENT\", \"development\")\n\nif environment == \"production\":\n    configure_logging(\n        app_name=\"my-service\",\n        environment=\"production\",\n        log_level=\"INFO\",\n    )\nelse:\n    configure_logging(\n        app_name=\"my-service\",\n        environment=\"development\",\n        log_level=\"DEBUG\",\n    )\n</code></pre>"},{"location":"examples/basic/#application-startup-logging","title":"Application Startup Logging","text":"<pre><code>from netrun_logging import configure_logging, get_logger\n\n# Configure at startup\nconfigure_logging(\n    app_name=\"user-service\",\n    environment=\"production\",\n    log_level=\"INFO\",\n)\n\nlogger = get_logger(__name__)\n\n# Log startup information\nlogger.info(\"Application starting\")\nlogger.info(\"Configuration loaded\", extra={\n    \"app_name\": \"user-service\",\n    \"version\": \"1.0.0\",\n    \"environment\": \"production\",\n})\n\n# Your application code\nlogger.info(\"Application started successfully\")\n</code></pre>"},{"location":"examples/basic/#monitoring-and-alerting","title":"Monitoring and Alerting","text":"<pre><code>from netrun_logging import get_logger\n\nlogger = get_logger(\"alerts\")\n\n# Log errors for monitoring systems to pick up\ntry:\n    process_payment(amount=99.99)\nexcept Exception as e:\n    # Alert level logging\n    logger.error(\n        \"Payment processing failed - ALERT\",\n        extra={\n            \"severity\": \"high\",\n            \"alert_enabled\": True,\n            \"amount\": 99.99,\n            \"error_type\": type(e).__name__,\n        }\n    )\n</code></pre>"},{"location":"examples/fastapi/","title":"FastAPI Integration","text":""},{"location":"examples/fastapi/#quick-start","title":"Quick Start","text":"<pre><code>from fastapi import FastAPI\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.middleware import add_logging_middleware\n\n# Configure logging at startup\nconfigure_logging(app_name=\"fastapi-service\", environment=\"production\")\n\n# Create app\napp = FastAPI(title=\"FastAPI Service\")\n\n# Add logging middleware\nadd_logging_middleware(app)\n\n# Get logger\nlogger = get_logger(__name__)\n\n@app.get(\"/health\")\nasync def health_check():\n    logger.info(\"Health check called\")\n    return {\"status\": \"healthy\"}\n\nif __name__ == \"__main__\":\n    import uvicorn\n    logger.info(\"Starting FastAPI server\")\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre>"},{"location":"examples/fastapi/#requestresponse-logging","title":"Request/Response Logging","text":"<pre><code>from fastapi import FastAPI\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.middleware import add_logging_middleware\n\nconfigure_logging(app_name=\"api-service\")\napp = FastAPI()\nadd_logging_middleware(app, log_level=\"INFO\")\n\nlogger = get_logger(__name__)\n\n@app.post(\"/api/users\")\nasync def create_user(name: str, email: str):\n    logger.info(\n        \"Creating user\",\n        extra={\n            \"name\": name,\n            \"email\": email,\n        }\n    )\n\n    user_id = 123  # Simulated\n\n    logger.info(\n        \"User created\",\n        extra={\n            \"user_id\": user_id,\n            \"name\": name,\n            \"email\": email,\n        }\n    )\n\n    return {\"user_id\": user_id, \"name\": name, \"email\": email}\n</code></pre> <p>All requests and responses are automatically logged with: - HTTP method - Path - Status code - Duration - Correlation ID</p>"},{"location":"examples/fastapi/#correlation-id-propagation","title":"Correlation ID Propagation","text":"<pre><code>from fastapi import FastAPI, Request\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.middleware import add_logging_middleware\nfrom netrun_logging.correlation import get_correlation_id\nimport httpx\n\nconfigure_logging(app_name=\"service-a\")\napp = FastAPI()\nadd_logging_middleware(app)\n\nlogger = get_logger(__name__)\n\n@app.get(\"/api/data\")\nasync def get_data():\n    # Get correlation ID from request context\n    correlation_id = get_correlation_id()\n\n    logger.info(\n        \"Calling downstream service\",\n        extra={\"downstream\": \"service-b\"}\n    )\n\n    # Pass correlation ID to downstream service\n    headers = {\"X-Correlation-ID\": correlation_id}\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\n            \"http://service-b:8001/api/endpoint\",\n            headers=headers\n        )\n\n    logger.info(\n        \"Downstream call completed\",\n        extra={\"status\": response.status_code}\n    )\n\n    return response.json()\n</code></pre>"},{"location":"examples/fastapi/#request-scoped-context","title":"Request-Scoped Context","text":"<pre><code>from fastapi import FastAPI, Request\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.context import set_context, clear_context\nfrom netrun_logging.middleware import add_logging_middleware\n\nconfigure_logging(app_name=\"scoped-context-service\")\napp = FastAPI()\nadd_logging_middleware(app)\n\nlogger = get_logger(__name__)\n\n@app.middleware(\"http\")\nasync def request_context_middleware(request: Request, call_next):\n    # Extract user info from request (example)\n    user_id = request.headers.get(\"X-User-ID\", \"anonymous\")\n    request_path = request.url.path\n\n    # Set context for this request\n    set_context(\n        user_id=user_id,\n        request_path=request_path,\n        method=request.method,\n    )\n\n    logger.info(\"Request received\")\n\n    try:\n        response = await call_next(request)\n        return response\n    finally:\n        # Clear context when request is done\n        clear_context()\n\n@app.get(\"/api/profile\")\nasync def get_profile():\n    # Context is automatically included in all logs\n    logger.info(\"Retrieving user profile\")\n    return {\"user_id\": \"123\", \"profile\": \"data\"}\n</code></pre>"},{"location":"examples/fastapi/#error-handling-with-logging","title":"Error Handling with Logging","text":"<pre><code>from fastapi import FastAPI, HTTPException\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.middleware import add_logging_middleware\n\nconfigure_logging(app_name=\"error-handler-service\")\napp = FastAPI()\nadd_logging_middleware(app)\n\nlogger = get_logger(__name__)\n\n@app.get(\"/api/users/{user_id}\")\nasync def get_user(user_id: int):\n    try:\n        # Simulate database lookup\n        if user_id &lt; 0:\n            raise ValueError(\"Invalid user ID\")\n\n        logger.debug(f\"Looking up user {user_id}\")\n        user = {\"id\": user_id, \"name\": \"John Doe\"}\n        logger.info(\"User found\", extra={\"user_id\": user_id})\n\n        return user\n\n    except ValueError as e:\n        logger.warning(\"Invalid user ID provided\", extra={\"user_id\": user_id})\n        raise HTTPException(status_code=400, detail=str(e))\n    except Exception as e:\n        logger.exception(\"Unexpected error retrieving user\")\n        raise HTTPException(status_code=500, detail=\"Internal server error\")\n</code></pre>"},{"location":"examples/fastapi/#batch-operations","title":"Batch Operations","text":"<pre><code>from fastapi import FastAPI\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.correlation import correlation_id_context\n\nconfigure_logging(app_name=\"batch-service\")\napp = FastAPI()\nlogger = get_logger(__name__)\n\n@app.post(\"/api/batch/process\")\nasync def process_batch(items: list):\n    # Use correlation ID for entire batch\n    with correlation_id_context() as batch_id:\n        logger.info(\n            \"Starting batch processing\",\n            extra={\n                \"batch_id\": batch_id,\n                \"item_count\": len(items),\n            }\n        )\n\n        successful = 0\n        failed = 0\n\n        for i, item in enumerate(items):\n            try:\n                logger.debug(\n                    \"Processing item\",\n                    extra={\"index\": i, \"item_id\": item.get(\"id\")}\n                )\n                # Process item\n                successful += 1\n            except Exception as e:\n                logger.error(\n                    \"Failed to process item\",\n                    extra={\n                        \"index\": i,\n                        \"item_id\": item.get(\"id\"),\n                        \"error\": str(e),\n                    }\n                )\n                failed += 1\n\n        logger.info(\n            \"Batch processing completed\",\n            extra={\n                \"batch_id\": batch_id,\n                \"successful\": successful,\n                \"failed\": failed,\n                \"total\": len(items),\n            }\n        )\n\n        return {\n            \"batch_id\": batch_id,\n            \"successful\": successful,\n            \"failed\": failed,\n        }\n</code></pre>"},{"location":"examples/fastapi/#custom-middleware-with-logging","title":"Custom Middleware with Logging","text":"<pre><code>from fastapi import FastAPI, Request\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.middleware import add_logging_middleware\nimport time\n\nconfigure_logging(app_name=\"custom-middleware-service\")\napp = FastAPI()\nadd_logging_middleware(app)\n\nlogger = get_logger(__name__)\n\n@app.middleware(\"http\")\nasync def timing_middleware(request: Request, call_next):\n    start_time = time.time()\n\n    response = await call_next(request)\n\n    duration = time.time() - start_time\n    duration_ms = duration * 1000\n\n    logger.info(\n        \"Request timing\",\n        extra={\n            \"method\": request.method,\n            \"path\": request.url.path,\n            \"status_code\": response.status_code,\n            \"duration_ms\": f\"{duration_ms:.2f}\",\n        }\n    )\n\n    return response\n\n@app.get(\"/api/slow\")\nasync def slow_endpoint():\n    import asyncio\n    await asyncio.sleep(0.5)\n    logger.info(\"Slow endpoint executed\")\n    return {\"message\": \"done\"}\n</code></pre>"},{"location":"examples/fastapi/#startupshutdown-events","title":"Startup/Shutdown Events","text":"<pre><code>from fastapi import FastAPI\nfrom netrun_logging import configure_logging, get_logger\nfrom netrun_logging.middleware import add_logging_middleware\n\nconfigure_logging(app_name=\"lifecycle-service\")\napp = FastAPI()\nadd_logging_middleware(app)\n\nlogger = get_logger(__name__)\n\n@app.on_event(\"startup\")\nasync def startup():\n    logger.info(\"Application starting up\")\n    logger.info(\"Database connecting\")\n    # Initialize resources\n    logger.info(\"Startup complete\")\n\n@app.on_event(\"shutdown\")\nasync def shutdown():\n    logger.info(\"Application shutting down\")\n    # Cleanup resources\n    logger.info(\"Shutdown complete\")\n\n@app.get(\"/health\")\nasync def health_check():\n    return {\"status\": \"ok\"}\n</code></pre>"}]}